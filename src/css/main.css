/* ==========================================================================
   1. IMPORTS & DEPENDENCIES
   ========================================================================== */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap')
layer(base);

@import 'tailwindcss';
@plugin '@tailwindcss/typography';

/* ==========================================================================
   2. DESIGN SYSTEM
   ========================================================================== */

@theme {
    /* Typography */
    --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
    
    /* Color System - Light Mode (Default) */
    --color-bg-primary: #fafafa;
    --color-bg-secondary: #ffffff;
    --color-bg-tertiary: #f5f5f5;
    --color-text-primary: #1a1a1a;
    --color-text-secondary: #666666;
    --color-text-tertiary: #999999;
    --color-border: #e5e5e5;
    --color-border-subtle: #f0f0f0;
    --color-accent: #0066cc;
    --color-accent-hover: #0052a3;
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-error: #ef4444;
    
    /* Dark Mode Colors */
    --color-dark-bg-primary: #0a0a0a;
    --color-dark-bg-secondary: #1a1a1a;
    --color-dark-bg-tertiary: #262626;
    --color-dark-text-primary: #f5f5f5;
    --color-dark-text-secondary: #a3a3a3;
    --color-dark-text-tertiary: #737373;
    --color-dark-border: #404040;
    --color-dark-border-subtle: #262626;
    --color-dark-accent: #3399ff;
    --color-dark-accent-hover: #66b3ff;
    
    /* Layout & Spacing */
    --container-max: 1200px;
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    --spacing-2xl: 3rem;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    
    /* Transitions */
    --transition-fast: 150ms ease;
    --transition-base: 250ms ease;
    --transition-slow: 350ms ease;
}

/* ==========================================================================
   3. BASE STYLES
   ========================================================================== */

@layer base {
    html {
        @apply antialiased;
        font-family: var(--font-sans);
        color: var(--color-text-primary);
        background-color: var(--color-bg-primary);
        transition: color var(--transition-base), background-color var(--transition-base);
    }
    
    body {
        @apply min-h-screen;
        line-height: 1.6;
        font-size: 16px;
    }
    
    /* Typography */
    h1, h2, h3, h4, h5, h6 {
        @apply font-semibold;
        line-height: 1.25;
        letter-spacing: -0.025em;
        color: var(--color-text-primary);
    }
    
    h1 { font-size: 2.25rem; }
    h2 { font-size: 1.875rem; }
    h3 { font-size: 1.5rem; }
    h4 { font-size: 1.25rem; }
    h5 { font-size: 1.125rem; }
    h6 { font-size: 1rem; }
    
    p {
        margin-bottom: var(--spacing-md);
        color: var(--color-text-secondary);
    }
    
    a {
        color: var(--color-accent);
        text-decoration: none;
        transition: color var(--transition-fast);
        
        &:hover {
            color: var(--color-accent-hover);
        }
    }
    
    /* Form Elements */
    input, textarea, select {
        @apply w-full px-3 py-2 rounded-md border;
        background-color: var(--color-bg-secondary);
        border-color: var(--color-border);
        color: var(--color-text-primary);
        transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        
        &:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }
    }
    
    select {
        @apply cursor-pointer;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
    }
    
    button {
        @apply px-4 py-2 rounded-md font-medium transition-all;
        background-color: var(--color-accent);
        color: white;
        border: none;
        cursor: pointer;
        transition: background-color var(--transition-fast), transform var(--transition-fast);
        
        &:hover {
            background-color: var(--color-accent-hover);
            transform: translateY(-1px);
        }
        
        &:active {
            transform: translateY(0);
        }
    }
}

/* ==========================================================================
   4. THEME VARIANTS
   ========================================================================== */

@layer base {
    /* Dark Mode */
    [data-theme='dark'] {
        --color-bg-primary: var(--color-dark-bg-primary);
        --color-bg-secondary: var(--color-dark-bg-secondary);
        --color-bg-tertiary: var(--color-dark-bg-tertiary);
        --color-text-primary: var(--color-dark-text-primary);
        --color-text-secondary: var(--color-dark-text-secondary);
        --color-text-tertiary: var(--color-dark-text-tertiary);
        --color-border: var(--color-dark-border);
        --color-border-subtle: var(--color-dark-border-subtle);
        --color-accent: var(--color-dark-accent);
        --color-accent-hover: var(--color-dark-accent-hover);
    }
    
    /* Color Themes */
    [data-theme='accent-blue'] {
        --color-accent: #0066cc;
        --color-accent-hover: #0052a3;
    }
    
    [data-theme='accent-green'] {
        --color-accent: #10b981;
        --color-accent-hover: #059669;
    }
    
    [data-theme='accent-purple'] {
        --color-accent: #8b5cf6;
        --color-accent-hover: #7c3aed;
    }
}

/* ==========================================================================
   5. COMPONENT STYLES
   ========================================================================== */

@layer components {
    /* Cards */
    .card {
        @apply rounded-lg p-6;
        background-color: var(--color-bg-secondary);
        border: 1px solid var(--color-border-subtle);
        box-shadow: var(--shadow-sm);
        transition: box-shadow var(--transition-fast), transform var(--transition-fast);
        
        &:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }
    }
    
    /* Prose Content */
    .prose {
        max-width: none;
        color: var(--color-text-secondary);
        
        h1, h2, h3, h4, h5, h6 {
            color: var(--color-text-primary);
            margin-top: var(--spacing-xl);
            margin-bottom: var(--spacing-md);
        }
        
        p {
            margin-bottom: var(--spacing-md);
        }
        
        a {
            color: var(--color-accent);
            text-decoration: underline;
            text-underline-offset: 2px;
            
            &:hover {
                text-decoration: none;
            }
        }
        
        blockquote {
            @apply pl-4 border-l-2;
            border-color: var(--color-accent);
            font-style: italic;
            color: var(--color-text-secondary);
        }
        
        code {
            @apply px-1 py-0.5 rounded text-sm;
            background-color: var(--color-bg-tertiary);
            color: var(--color-text-primary);
            font-family: var(--font-mono);
        }
        
        pre {
            @apply p-4 rounded-lg overflow-x-auto;
            background-color: var(--color-bg-tertiary);
            border: 1px solid var(--color-border-subtle);
            
            code {
                @apply p-0 bg-transparent;
            }
        }
        
        hr {
            @apply my-8 border-0;
            border-top: 1px solid var(--color-border-subtle);
        }
    }
    
    /* Navigation */
    .nav {
        @apply flex items-center justify-between p-4;
        background-color: var(--color-bg-secondary);
        border-bottom: 1px solid var(--color-border-subtle);
        
        a {
            @apply font-medium;
            color: var(--color-text-primary);
            
            &:hover {
                color: var(--color-accent);
            }
        }
    }
    
    /* Buttons */
    .btn {
        @apply inline-flex items-center justify-center px-4 py-2 rounded-md font-medium transition-all;
        border: 1px solid transparent;
        cursor: pointer;
        
        &-primary {
            background-color: var(--color-accent);
            color: white;
            
            &:hover {
                background-color: var(--color-accent-hover);
                transform: translateY(-1px);
            }
        }
        
        &-secondary {
            background-color: transparent;
            color: var(--color-text-primary);
            border-color: var(--color-border);
            
            &:hover {
                background-color: var(--color-bg-tertiary);
            }
        }
        
        &-ghost {
            background-color: transparent;
            color: var(--color-text-secondary);
            
            &:hover {
                background-color: var(--color-bg-tertiary);
                color: var(--color-text-primary);
            }
        }
    }
}

/* ==========================================================================
   6. UTILITY CLASSES
   ========================================================================== */

@layer utilities {
    /* Background Colors */
    .bg-primary { background-color: var(--color-bg-primary); }
    .bg-secondary { background-color: var(--color-bg-secondary); }
    .bg-tertiary { background-color: var(--color-bg-tertiary); }
    
    /* Text Colors */
    .text-primary { color: var(--color-text-primary); }
    .text-secondary { color: var(--color-text-secondary); }
    .text-tertiary { color: var(--color-text-tertiary); }
    .text-accent { color: var(--color-accent); }
    
    /* Borders */
    .border-subtle { border-color: var(--color-border-subtle); }
    
    /* Focus Styles */
    .focus-ring {
        &:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }
    }
    
    /* Animations */
    .animate-fade-in {
        animation: fadeIn 0.3s ease-in-out;
    }
    
    .animate-slide-up {
        animation: slideUp 0.3s ease-out;
    }
}

/* ==========================================================================
   7. ANIMATIONS
   ========================================================================== */

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
